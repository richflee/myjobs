<!doctype html>
<html>
	<head>

		<meta charset="utf-8" />
	    <meta name="viewport" content="width=device-width, initial-scale=1.0">
		
		<title>MyJobs - Job collator/tracker/helper/nerve-center</title>

		<link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">
		<link href="public/css/style.css" rel="stylesheet">
		<link href="public/libs/css/foundation.css" rel="stylesheet">

		<script src="https://unpkg.com/react@15.3.2/dist/react.js"></script>
		<script src="https://unpkg.com/react-dom@15.3.2/dist/react-dom.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.38/browser.min.js"></script>

	</head>
	<body>

		<div id="main-container"></div>



		<script type="text/babel">


			var JobsList = React.createClass({
				getInitialState() {
					return { 
						jobs: [  ]
					}
				},
				nextId() {
					this.uniqueId = this.uniqueId || 0
					return this.uniqueId++
				},
				nextJobNumber() {
					return this.state.jobs.length++
				},
				add() {
					
					var jobs = [ 
						...this.state.jobs, 
						{
							id: this.nextId(),
							job_number: this.nextJobNumber(),
							client: "Client name here",
							date: "1/1/2016"
						}
					]
					this.setState({jobs})
				},
				render() {

					return (
							<div className="row">
								<JobsListHeaderBar />
								{this.state.jobs.map((job, i) => {
									return <JobRow key={i} jobNumber={job.job_number} client={job.client} date={job.date} />
								})}
								<button onClick={ () => this.add() }>Add job</button>
							</div>
						)
				}
			})

			var JobsListHeaderBar = React.createClass({

				render() {
					return (
						<div className="row job-row">
							<span className="small-2 medium-2 large-2 columns table-header-label">Job num</span>
							<span className="small-6 medium-6 large-6 columns table-header-label">Client</span>
							<span className="small-4 medium-4 large-4 columns table-header-label">Date created</span>
						</div>
					)
				}
			})

			var JobRow = React.createClass({

				getInitialState() {
					return { editing: false }
				},
				edit() {
					this.setState({editing: true})
				},
				save() {
					this.setState({editing: false})
				},
				renderForm() {

					return (
							<div className="row">
								<span className="small-2 medium-2 large-2 columns"><input type="text" value={this.props.jobNumber} /></span>
								<span className="small-4 medium-4 large-4 columns"><input type="text" value={this.props.client} /></span>
								<span className="small-4 medium-4 large-4 columns"><input type="text" value={this.props.date} /></span>
								<span className="small-2 medium-2 large-2 columns"><button onClick={ () => this.save() }>Save</button></span>
							</div>
						)
				},
				renderDisplay() {
					return (
						<div className="row job-row">
							<span className="small-2 medium-2 large-2 columns">{this.props.jobNumber}</span>
							<span className="small-4 medium-4 large-4 columns">{this.props.client}</span>
							<span className="small-4 medium-4 large-4 columns">{this.props.date}</span>
							<span className="small-2 medium-2 large-2 columns"><button onClick={ () => this.edit() }>edit</button></span>
						</div>
					)
				},
				render() {
					return (this.state.editing) ? this.renderForm()
                                          : this.renderDisplay()
				}
			})

			ReactDOM.render(<JobsList />, document.getElementById('main-container'))

		</script>

	</body>
</html>